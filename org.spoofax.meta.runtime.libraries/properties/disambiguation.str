module properties/disambiguation

imports
  properties/collect
  properties/query
  task/core
  task/tasks
  libstratego-sglr

rules
  
  create-property-task(|ctx, kind) =
    ?amb(<map(get-or-create-property-task(|ctx, kind)); task-create-choice(|ctx)>)
    
  disambiguate-all(|kind) = bottomup(try(disambiguate(|kind)))
  
  disambiguate(|kind) =
    amb(filter(where(get-property(|kind); not(task-has-failed))); not([]))
  ; try(?amb([<id>]))
    
     
       
        